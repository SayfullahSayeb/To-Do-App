<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modern To-Do App</title>
  <style>
    /* General Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Arial', sans-serif;
      background-color: #121212; /* Dark mode background */
      color: #ffffff; /* Light text for dark mode */
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 20px;
      color: #00adb5; /* Accent color */
    }

    #todo-form {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
      width: 100%;
      max-width: 500px;
    }

    #todo-form input {
      flex: 1;
      padding: 12px 15px;
      font-size: 1rem;
      border: none;
      border-radius: 5px;
      outline: none;
      background-color: #1e1e1e; /* Dark input background */
      color: #ffffff;
    }

    #todo-form button {
      padding: 12px 20px;
      font-size: 1rem;
      margin-left: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background-color: #00adb5; /* Accent color */
      color: #ffffff;
      transition: background-color 0.3s ease;
    }

    #todo-form button:hover {
      background-color: #007b7f; /* Darker accent on hover */
    }

    ul {
      list-style-type: none;
      padding: 0;
      width: 100%;
      max-width: 500px;
    }

    li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      margin-bottom: 10px;
      background-color: #1e1e1e; /* Dark card background */
      border-radius: 5px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
      transition: transform 0.2s ease, background-color 0.3s ease;
    }

    li:hover {
      transform: scale(1.02); /* Slight zoom on hover */
      background-color: #292929; /* Slightly lighter background */
    }

    li.completed {
      order: 1; /* Push completed items to the bottom */
    }

    li.completed span {
      text-decoration: line-through;
      color: #888888; /* Faded text for completed tasks */
    }

    .checkbox-container {
      display: flex;
      align-items: center;
      cursor: pointer;
    }

    .checkbox-container input[type="checkbox"] {
      display: none; /* Hide the default checkbox */
    }

    .custom-checkbox {
      width: 20px;
      height: 20px;
      border: 2px solid #00adb5; /* Accent color */
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 10px;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }

    .custom-checkbox.checked {
      background-color: #00adb5; /* Accent color when checked */
      border-color: #00adb5;
    }

    .custom-checkbox.checked::after {
      content: 'âœ”'; /* Checkmark */
      color: #121212; /* Dark background for the checkmark */
      font-size: 14px;
    }

    .task-content {
      flex: 1;
      display: flex;
      align-items: center;
    }

    .task-content span {
      margin-left: 10px;
    }

    .action-buttons {
      display: flex;
      gap: 10px;
    }

    .edit-btn, .delete-btn {
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .edit-btn {
      background-color: #00adb5; /* Accent color for edit */
      color: #ffffff;
    }

    .edit-btn:hover {
      background-color: #007b7f; /* Darker accent on hover */
    }

    .delete-btn {
      background-color: #ff4c4c; /* Red delete button */
      color: #ffffff;
    }

    .delete-btn:hover {
      background-color: #d93636; /* Darker red on hover */
    }

    /* Modal Styling */
    #edit-modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #1e1e1e;
      padding: 40px;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
      display: none;
      z-index: 1000;
      width: 90%;
      max-width: 600px;
    }

    #edit-modal textarea,
    #edit-modal input {
      width: 100%;
      padding: 15px;
      margin-bottom: 15px;
      border: none;
      border-radius: 5px;
      background-color: #292929;
      color: #ffffff;
      resize: none;
      font-size: 1rem;
    }

    #edit-modal button {
      padding: 15px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background-color: #00adb5;
      color: #ffffff;
      transition: background-color 0.3s ease;
      font-size: 1rem;
    }

    #edit-modal button:hover {
      background-color: #007b7f;
    }

    #modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      display: none;
      z-index: 999;
    }

    #modal-options {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }

    #cancel-edit-btn {
      padding: 15px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background-color: #ff4c4c;
      color: #ffffff;
      transition: background-color 0.3s ease;
      font-size: 1rem;
    }

    #cancel-edit-btn:hover {
      background-color: #d93636;
    }
  </style>
</head>
<body>
  <h1>Modern To-Do App</h1>
  <div id="todo-form">
    <input type="text" id="todo-input" placeholder="Enter a new task..." />
    <button id="add-btn">Add</button>
  </div>
  <ul id="todo-list"></ul>

  <!-- Modal for Editing -->
  <div id="modal-overlay"></div>
  <div id="edit-modal">
    <textarea id="edit-textarea" style="display: none;"></textarea>
    <input type="text" id="edit-input" />
    <div id="modal-options">
      <button id="save-edit-btn">Save</button>
      <button id="cancel-edit-btn">Cancel</button>
    </div>
  </div>

  <script>
    // Select elements
    const todoInput = document.getElementById('todo-input');
    const addBtn = document.getElementById('add-btn');
    const todoList = document.getElementById('todo-list');
    const editModal = document.getElementById('edit-modal');
    const editInput = document.getElementById('edit-input');
    const editTextarea = document.getElementById('edit-textarea');
    const saveEditBtn = document.getElementById('save-edit-btn');
    const cancelEditBtn = document.getElementById('cancel-edit-btn');
    const modalOverlay = document.getElementById('modal-overlay');

    let currentEditLi = null;

    // Load tasks from localStorage
    const loadTasks = () => {
      const tasks = JSON.parse(localStorage.getItem('tasks')) || [];
      tasks.forEach(task => addTaskToDOM(task.text, task.completed));
    };

    // Save tasks to localStorage
    const saveTasks = () => {
      const tasks = [];
      document.querySelectorAll('li').forEach(li => {
        const checkbox = li.querySelector('.custom-checkbox');
        tasks.push({
          text: li.querySelector('span').textContent,
          completed: checkbox.classList.contains('checked')
        });
      });
      localStorage.setItem('tasks', JSON.stringify(tasks));
    };

    // Add a task to the DOM
    const addTaskToDOM = (taskText, completed = false) => {
      const li = document.createElement('li');

      if (completed) {
        li.classList.add('completed');
      }

      // Create task content
      const taskContent = document.createElement('div');
      taskContent.classList.add('task-content');

      // Create checkbox container
      const checkboxContainer = document.createElement('label');
      checkboxContainer.classList.add('checkbox-container');

      // Create custom checkbox
      const customCheckbox = document.createElement('div');
      customCheckbox.classList.add('custom-checkbox');
      if (completed) {
        customCheckbox.classList.add('checked');
      }

      // Create hidden checkbox input
      const checkboxInput = document.createElement('input');
      checkboxInput.type = 'checkbox';
      checkboxInput.checked = completed;
      checkboxInput.addEventListener('change', () => {
        customCheckbox.classList.toggle('checked');
        li.classList.toggle('completed');
        reorderTasks();
        saveTasks();
      });

      // Append checkbox input and custom checkbox to container
      checkboxContainer.appendChild(checkboxInput);
      checkboxContainer.appendChild(customCheckbox);

      // Create task text
      const span = document.createElement('span');
      span.textContent = taskText;

      // Append checkbox and text to task content
      taskContent.appendChild(checkboxContainer);
      taskContent.appendChild(span);

      // Create action buttons
      const actionButtons = document.createElement('div');
      actionButtons.classList.add('action-buttons');

      // Add edit button
      const editBtn = document.createElement('button');
      editBtn.textContent = 'Edit';
      editBtn.classList.add('edit-btn');
      editBtn.addEventListener('click', () => {
        currentEditLi = li;
        if (span.textContent.length > 50) {
          editTextarea.style.display = 'block';
          editInput.style.display = 'none';
          editTextarea.value = span.textContent;
        } else {
          editTextarea.style.display = 'none';
          editInput.style.display = 'block';
          editInput.value = span.textContent;
        }
        editModal.style.display = 'block';
        modalOverlay.style.display = 'block';
      });

      // Add delete button
      const deleteBtn = document.createElement('button');
      deleteBtn.textContent = 'Delete';
      deleteBtn.classList.add('delete-btn');
      deleteBtn.addEventListener('click', () => {
        li.remove();
        saveTasks();
      });

            // Append buttons to action buttons container
      actionButtons.appendChild(editBtn);
      actionButtons.appendChild(deleteBtn);

      // Append content and action buttons to list item
      li.appendChild(taskContent);
      li.appendChild(actionButtons);

      // Append list item to the task list
      todoList.appendChild(li);
    };

    // Reorder tasks based on their completion status
    const reorderTasks = () => {
      const tasks = Array.from(todoList.children);
      tasks.sort((a, b) => {
        return a.classList.contains('completed') - b.classList.contains('completed');
      });
      tasks.forEach(task => todoList.appendChild(task));
    };

    // Add new task
    addBtn.addEventListener('click', () => {
      const taskText = todoInput.value.trim();
      if (!taskText) {
        alert('Please enter a task!');
        return;
      }
      addTaskToDOM(taskText);
      todoInput.value = '';
      saveTasks();
    });

    // Save edit changes
    saveEditBtn.addEventListener('click', () => {
      if (!currentEditLi) return;
      const newText = editTextarea.style.display === 'block' ? editTextarea.value : editInput.value;
      currentEditLi.querySelector('span').textContent = newText;
      editModal.style.display = 'none';
      modalOverlay.style.display = 'none';
      saveTasks();
    });

    // Cancel edit changes
    cancelEditBtn.addEventListener('click', () => {
      editModal.style.display = 'none';
      modalOverlay.style.display = 'none';
    });

    // Load tasks on page load
    loadTasks();

    // Close modal on clicking overlay
    modalOverlay.addEventListener('click', () => {
      editModal.style.display = 'none';
      modalOverlay.style.display = 'none';
    });
  </script>
</body>
</html>
